"use strict";function r(r){return r&&"object"==typeof r&&"default"in r?r.default:r}var e=require("react"),t=r(e),n=r(require("tiny-invariant")),o=require("@web3-react/types"),c=(r(require("tiny-warning")),require("@ethersproject/bytes")),i=require("@ethersproject/keccak256");function a(){return(a=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function u(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,p(r,e)}function s(r){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function p(r,e){return(p=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(r){return!1}}function d(r,e,t){return(d=f()?Reflect.construct:function(r,e,t){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(r,n));return t&&p(o,t.prototype),o}).apply(null,arguments)}function v(r){var e="function"==typeof Map?new Map:void 0;return(v=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(r))return e.get(r);e.set(r,t)}function t(){return d(r,arguments,s(this).constructor)}return t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),p(t,r)})(r)}function l(r,e){try{var t=r()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function y(r){if("string"==typeof r){r=r.replace(/^Ox/,"0x");var e=Number.parseInt(r,"0x"===r.trim().substring(0,2)?16:10);return Number.isNaN(e)&&n(!1),e}return Number.isInteger(r)||n(!1),r}function R(r){"string"==typeof r&&r.match(/^(0x)?[0-9a-fA-F]{40}$/)||n(!1);for(var e="0x"===r.substring(0,2)?r:"0x"+r,t=e.toLowerCase().substring(2).split(""),o=new Uint8Array(40),a=0;a<40;a++)o[a]=t[a].charCodeAt(0);for(var u=c.arrayify(i.keccak256(o)),s=0;s<40;s+=2)u[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(15&u[s>>1])>=8&&(t[s+1]=t[s+1].toUpperCase());var p="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==p&&n(!1),p}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var E,h=function(r,e){try{var t=function(t){return Promise.resolve(Promise.all([void 0===e.chainId?r.getChainId():e.chainId,void 0===e.account?r.getAccount():e.account])).then((function(e){var n=e[1],o=y(e[0]);if(r.supportedChainIds&&!r.supportedChainIds.includes(o))throw new C(o,r.supportedChainIds);var c=null===n?n:R(n);return{provider:t,chainId:o,account:c}}))};return Promise.resolve(void 0===e.provider?Promise.resolve(r.getProvider()).then(t):t(e.provider))}catch(r){return Promise.reject(r)}},O=function(r){function e(){var e;return(e=r.call(this)||this).name=e.constructor.name,e}return u(e,r),e}(v(Error)),C=function(r){function e(e,t){var n;return(n=r.call(this)||this).name=n.constructor.name,n.message="Unsupported chain id: "+e+". Supported chain ids are: "+t+".",n}return u(e,r),e}(v(Error));function I(r,e){var t=e.payload;switch(e.type){case E.ACTIVATE_CONNECTOR:return{connector:t.connector,provider:t.provider,chainId:t.chainId,account:t.account,onError:t.onError};case E.UPDATE:var n=t.provider,o=t.chainId,c=t.account;return a({},r,void 0===n?{}:{provider:n},void 0===o?{}:{chainId:o},void 0===c?{}:{account:c});case E.UPDATE_FROM_ERROR:var i=t.provider,u=t.chainId,s=t.account;return a({},r,void 0===i?{}:{provider:i},void 0===u?{}:{chainId:u},void 0===s?{}:{account:s},{error:void 0});case E.ERROR:return{connector:r.connector,error:t.error,onError:r.onError};case E.ERROR_FROM_ACTIVATION:return{connector:t.connector,error:t.error};case E.DEACTIVATE_CONNECTOR:return{}}}!function(r){r[r.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",r[r.UPDATE=1]="UPDATE",r[r.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",r[r.ERROR=3]="ERROR",r[r.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",r[r.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"}(E||(E={}));var b={};function m(r){b[r]&&n(!1),b[r]=e.createContext({activate:function(){try{return n(!1),Promise.resolve()}catch(r){return Promise.reject(r)}},setError:function(){n(!1)},deactivate:function(){n(!1)},active:!1}),b[r].displayName="Web3ReactContext - "+r;var c=b[r].Provider;return function(r){var n=r.getLibrary,i=r.children,u=function(){var r=e.useReducer(I,{}),t=r[0],n=r[1],c=t.connector,i=t.provider,u=t.chainId,s=t.account,p=t.onError,f=t.error,d=e.useRef(-1);d.current+=1;var v=e.useCallback((function(r,e,t){void 0===t&&(t=!1);try{var o=d.current,c=!1;return Promise.resolve(l((function(){return Promise.resolve(r.activate().then((function(r){return c=!0,r}))).then((function(t){return Promise.resolve(h(r,t)).then((function(t){if(d.current>o)throw new O;n({type:E.ACTIVATE_CONNECTOR,payload:a({connector:r},t,{onError:e})})}))}))}),(function(o){if(o instanceof O)c&&r.deactivate();else{if(t)throw c&&r.deactivate(),o;e?(c&&r.deactivate(),e(o)):n({type:E.ERROR_FROM_ACTIVATION,payload:{connector:r,error:o}})}})))}catch(r){return Promise.reject(r)}}),[]),b=e.useCallback((function(r){n({type:E.ERROR,payload:{error:r}})}),[]),m=e.useCallback((function(){n({type:E.DEACTIVATE_CONNECTOR})}),[]),T=e.useCallback((function(r){try{if(!c)throw Error("This should never happen, it's just so Typescript stops complaining");var e=d.current;return Promise.resolve(function(){if(f)return l((function(){return Promise.resolve(h(c,r)).then((function(r){if(d.current>e)throw new O;n({type:E.UPDATE_FROM_ERROR,payload:r})}))}),(function(r){r instanceof O||(p?p(r):n({type:E.ERROR,payload:{error:r}}))}));var t=void 0===r.chainId?void 0:y(r.chainId);if(void 0!==t&&c.supportedChainIds&&!c.supportedChainIds.includes(t)){var o=new C(t,c.supportedChainIds);p?p(o):n({type:E.ERROR,payload:{error:o}})}else{var i="string"==typeof r.account?R(r.account):r.account;n({type:E.UPDATE,payload:{provider:r.provider,chainId:t,account:i}})}}())}catch(r){return Promise.reject(r)}}),[c,f,p]),A=e.useCallback((function(r){p?p(r):n({type:E.ERROR,payload:{error:r}})}),[p]),_=e.useCallback((function(){n({type:E.DEACTIVATE_CONNECTOR})}),[]);return e.useEffect((function(){return function(){c&&c.deactivate()}}),[c]),e.useEffect((function(){return c&&c.on(o.ConnectorEvent.Update,T).on(o.ConnectorEvent.Error,A).on(o.ConnectorEvent.Deactivate,_),function(){c&&c.off(o.ConnectorEvent.Update,T).off(o.ConnectorEvent.Error,A).off(o.ConnectorEvent.Deactivate,_)}}),[c,T,A,_]),{connector:c,provider:i,chainId:u,account:s,activate:v,setError:b,deactivate:m,error:f}}(),s=u.connector,p=u.provider,f=u.chainId,d=u.account,v=u.activate,b=u.setError,m=u.deactivate,T=u.error,A=void 0!==s&&void 0!==f&&void 0!==d&&!T,_=e.useMemo((function(){return A&&void 0!==f&&Number.isInteger(f)&&s?n(p,s):void 0}),[A,n,p,s,f]);return t.createElement(c,{value:{connector:s,library:_,chainId:f,account:d,activate:v,setError:b,deactivate:m,active:A,error:T}},i)}}var T=m("primary");function A(r){return void 0===r&&(r="primary"),Object.keys(b).includes(r)||n(!1),b[r]}exports.PRIMARY_KEY="primary",exports.UnsupportedChainIdError=C,exports.Web3ReactProvider=T,exports.createWeb3ReactRoot=m,exports.getWeb3ReactContext=A,exports.useWeb3React=function(r){return e.useContext(A(r))};
//# sourceMappingURL=core.cjs.production.min.js.map
