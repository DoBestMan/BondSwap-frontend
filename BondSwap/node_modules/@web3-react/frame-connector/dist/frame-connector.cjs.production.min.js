"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("@web3-react/abstract-connector"),n=e(require("eth-provider")),r=e(require("tiny-invariant"));function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,i(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message="The user rejected the request.",t}return o(t,e),t}(h(Error));exports.FrameConnector=function(e){function t(t){var n;return 1!==t.supportedChainIds.length&&r(!1),(n=e.call(this,t)||this).handleNetworkChanged=n.handleNetworkChanged.bind(s(n)),n.handleChainChanged=n.handleChainChanged.bind(s(n)),n.handleAccountsChanged=n.handleAccountsChanged.bind(s(n)),n.handleClose=n.handleClose.bind(s(n)),n}o(t,e);var i=t.prototype;return i.handleNetworkChanged=function(e){this.emitUpdate({provider:this.provider,chainId:e})},i.handleChainChanged=function(e){this.emitUpdate({chainId:e})},i.handleAccountsChanged=function(e){this.emitUpdate({account:0===e.length?null:e[0]})},i.handleClose=function(e,t){this.emitDeactivate()},i.activate=function(){try{var e=this;return e.provider||(e.provider=n("frame")),e.provider.on("networkChanged",e.handleNetworkChanged).on("chainChanged",e.handleChainChanged).on("accountsChanged",e.handleAccountsChanged).on("close",e.handleClose),Promise.resolve(e.provider.enable().then((function(e){return e[0]})).catch((function(e){throw e&&4001===e.code?new d:e}))).then((function(t){return{provider:e.provider,account:t}}))}catch(e){return Promise.reject(e)}},i.getProvider=function(){try{return Promise.resolve(this.provider)}catch(e){return Promise.reject(e)}},i.getChainId=function(){try{return Promise.resolve(this.provider.send("eth_chainId"))}catch(e){return Promise.reject(e)}},i.getAccount=function(){try{return Promise.resolve(this.provider.send("eth_accounts").then((function(e){return e[0]})))}catch(e){return Promise.reject(e)}},i.deactivate=function(){this.provider.removeListener("networkChanged",this.handleNetworkChanged).removeListener("chainChanged",this.handleChainChanged).removeListener("accountsChanged",this.handleAccountsChanged).removeListener("close",this.handleClose)},t}(t.AbstractConnector),exports.UserRejectedRequestError=d;
//# sourceMappingURL=frame-connector.cjs.production.min.js.map
